@トラックバー往復
--dialog:配分,local m=0.5;ID,local id=1;
--check0:反転,0;
--track0:BPM,1.0,1600.0,120.0
--track1:ずらし,0,3000,0,1
--track2:行きID,-2,1024,0,1
--track3:帰りID,-2,1024,0,1

local lib = require("CurveWithBPM")

local bpm = obj.track0
local bps = bpm / 60
local delay = obj.track1
local curve_id = {s=obj.track2, e=obj.track3}
local c, t = math.modf((obj.frame + delay) * bps / obj.framerate)
local p

if t < m then
    p = lib.getcurve(curve_id.s, t / m, false)
else
    p = 1.0 - lib.getcurve(curve_id.e, (t - m) / (1.0 - m), obj.check0)
end

debug = tostring(t .. " / " .. p)

if CurveWithBPM == nil then
    CurveWithBPM = {}
end
if CurveWithBPM.track == nil then
    CurveWithBPM.track = {}
end

CurveWithBPM.track[id] = p
